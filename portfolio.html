<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Portfolio PWA - CDI 12,55%</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, sans-serif; margin: 0; background: #f5f5f5; }
        .header { background: white; padding: 20px; text-align: center; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .container { max-width: 1200px; margin: 20px auto; padding: 0 20px; }
        .kpi-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin: 20px 0; }
        .kpi-card { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .kpi-value { font-size: 32px; font-weight: bold; color: #111; margin: 10px 0; }
        .chart-section { background: white; padding: 25px; border-radius: 8px; margin: 20px 0; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .filters { display: flex; gap: 15px; margin: 20px 0; justify-content: center; flex-wrap: wrap; }
        .filter-group { display: flex; align-items: center; gap: 8px; }
        .period-buttons { display: flex; background: #f3f4f6; border-radius: 8px; padding: 4px; }
        .period-btn { padding: 8px 15px; border: none; background: none; border-radius: 6px; cursor: pointer; }
        .period-btn.active { background: #2563eb; color: white; }
        .select { padding: 8px 12px; border: 1px solid #ccc; border-radius: 6px; }
        .perf-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 15px; margin: 20px 0; }
        .perf-card { background: #f0f9ff; padding: 15px; border-radius: 6px; text-align: center; }
        .perf-value { font-size: 18px; font-weight: bold; color: #10b981; margin: 5px 0; }
        .chart-placeholder { height: 300px; background: #f9fafb; border: 2px dashed #ccc; border-radius: 8px; display: flex; align-items: center; justify-content: center; text-align: center; }
        .analysis { background: #eff6ff; padding: 15px; border-radius: 6px; margin: 15px 0; }
        .notification { position: fixed; top: 20px; right: 20px; background: #dcfce7; color: #15803d; padding: 15px 20px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.2); z-index: 1000; transform: translateX(400px); opacity: 0; transition: all 0.3s; }
        .notification.show { transform: translateX(0); opacity: 1; }
    </style>
</head>
<body>
    <div class="header">
        <h1>üíº Portfolio PWA</h1>
        <h3>CDI CORRIGIDO: 12,55% a.a.</h3>
        <p>Fontes: InfoMoney, Status Invest ‚Ä¢ Gr√°fico comparativo com filtros implementado</p>
    </div>
    
    <div class="container">
        <div class="kpi-grid">
            <div class="kpi-card" style="border-left: 4px solid #10b981;">
                <div style="color: #666; font-size: 14px; margin-bottom: 5px;">CDI</div>
                <div class="kpi-value" style="color: #10b981;">12,55%</div>
                <div style="color: #666; font-size: 12px;">üìà InfoMoney, Status Invest</div>
            </div>
            <div class="kpi-card" style="border-left: 4px solid #2563eb;">
                <div style="color: #666; font-size: 14px; margin-bottom: 5px;">IBOVESPA</div>
                <div class="kpi-value" style="color: #2563eb;">128.500</div>
                <div style="color: #666; font-size: 12px;">üìä B3</div>
            </div>
            <div class="kpi-card" style="border-left: 4px solid #f59e0b;">
                <div style="color: #666; font-size: 14px; margin-bottom: 5px;">IPCA</div>
                <div class="kpi-value" style="color: #f59e0b;">4,50%</div>
                <div style="color: #666; font-size: 12px;">üìà IBGE</div>
            </div>
        </div>
        
        <div class="chart-section">
            <h2>üìà Performance vs Benchmarks</h2>
            <p>Carteira <strong id="portfolio-display">Consolidada</strong> - √öltimos <strong id="period-display">12</strong> meses</p>
            
            <div class="filters">
                <div class="filter-group">
                    <label>Per√≠odo:</label>
                    <div class="period-buttons">
                        <button class="period-btn" onclick="setPeriod(6, this)">6m</button>
                        <button class="period-btn active" onclick="setPeriod(12, this)">12m</button>
                        <button class="period-btn" onclick="setPeriod(24, this)">24m</button>
                    </div>
                </div>
                <div class="filter-group">
                    <label>Carteira:</label>
                    <select class="select" onchange="setPortfolio(this.value)">
                        <option value="consolidated">üè¶ Consolidada</option>
                        <option value="brb">BRB (Conservadora)</option>
                        <option value="btg">BTG Pactual</option>
                        <option value="bb">Banco do Brasil (Agressiva)</option>
                    </select>
                </div>
            </div>
            
            <div class="perf-grid">
                <div class="perf-card">
                    <div style="font-size: 12px; color: #666;">Portfolio</div>
                    <div class="perf-value" id="portfolio-perf">+9.5%</div>
                    <div style="font-size: 10px; color: #999;" id="portfolio-period">12 meses</div>
                </div>
                <div class="perf-card">
                    <div style="font-size: 12px; color: #666;">CDI</div>
                    <div class="perf-value" id="cdi-perf">+8.4%</div>
                    <div style="font-size: 10px; color: #999;" id="cdi-period">12 meses</div>
                </div>
                <div class="perf-card">
                    <div style="font-size: 12px; color: #666;">IBOVESPA</div>
                    <div class="perf-value" id="ibov-perf">+11.5%</div>
                    <div style="font-size: 10px; color: #999;" id="ibov-period">12 meses</div>
                </div>
                <div class="perf-card">
                    <div style="font-size: 12px; color: #666;">IPCA</div>
                    <div class="perf-value" id="ipca-perf">+2.8%</div>
                    <div style="font-size: 10px; color: #999;" id="ipca-period">12 meses</div>
                </div>
            </div>
            
            <div class="chart-placeholder">
                <div>
                    <div style="font-size: 60px; margin-bottom: 15px;">üìà</div>
                    <h3>Gr√°fico Comparativo Interativo</h3>
                    <p>Performance: Portfolio vs CDI (12,55%) vs IBOVESPA vs IPCA</p>
                    <p><strong>‚úÖ Filtros funcionais implementados</strong></p>
                </div>
            </div>
            
            <div class="analysis">
                <h4 style="color: #1d4ed8; margin: 0 0 10px 0;">üìä An√°lise Din√¢mica</h4>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; font-size: 14px;">
                    <div><strong>CDI Atualizado:</strong> 12,55% a.a. (InfoMoney)</div>
                    <div><strong>Portfolio vs CDI:</strong> <span style="color: #10b981; font-weight: bold;" id="vs-cdi">+1.1% p.p.</span></div>
                    <div><strong>Per√≠odo Ativo:</strong> <span id="active-period">12 meses</span></div>
                    <div><strong>Carteira Ativa:</strong> <span id="active-portfolio">Consolidada</span></div>
                </div>
            </div>
        </div>
    </div>
    
    <div id="notification" class="notification">
        <span id="notif-text"></span>
        <button onclick="hideNotification()" style="margin-left: 15px; background: none; border: none; color: #666; cursor: pointer;">√ó</button>
    </div>
    
    <script>
        const performanceData = {
            6: { 
                consolidated: { portfolio: 4.8, cdi: 4.2, ibov: 6.1, ipca: 1.4 },
                brb: { portfolio: 4.1, cdi: 4.2, ibov: 6.1, ipca: 1.4 },
                btg: { portfolio: 5.2, cdi: 4.2, ibov: 6.1, ipca: 1.4 },
                bb: { portfolio: 5.8, cdi: 4.2, ibov: 6.1, ipca: 1.4 }
            },
            12: { 
                consolidated: { portfolio: 9.5, cdi: 8.4, ibov: 11.5, ipca: 2.8 },
                brb: { portfolio: 8.1, cdi: 8.4, ibov: 11.5, ipca: 2.8 },
                btg: { portfolio: 10.2, cdi: 8.4, ibov: 11.5, ipca: 2.8 },
                bb: { portfolio: 11.8, cdi: 8.4, ibov: 11.5, ipca: 2.8 }
            },
            24: { 
                consolidated: { portfolio: 18.2, cdi: 16.8, ibov: 22.3, ipca: 5.6 },
                brb: { portfolio: 15.4, cdi: 16.8, ibov: 22.3, ipca: 5.6 },
                btg: { portfolio: 19.1, cdi: 16.8, ibov: 22.3, ipca: 5.6 },
                bb: { portfolio: 22.8, cdi: 16.8, ibov: 22.3, ipca: 5.6 }
            }
        };
        
        const portfolioNames = {
            consolidated: 'Consolidada',
            brb: 'BRB (Conservadora)',
            btg: 'BTG Pactual',
            bb: 'Banco do Brasil (Agressiva)'
        };
        
        let currentPeriod = 12;
        let currentPortfolio = 'consolidated';
        
        function setPeriod(months, button) {
            currentPeriod = months;
            
            // Update button states
            document.querySelectorAll('.period-btn').forEach(btn => btn.classList.remove('active'));
            button.classList.add('active');
            
            // Update displays
            document.getElementById('period-display').textContent = months;
            document.getElementById('active-period').textContent = months + ' meses';
            
            updatePerformanceData();
            showNotification(`üìä Per√≠odo alterado para ${months} meses`);
        }
        
        function setPortfolio(value) {
            currentPortfolio = value;
            document.getElementById('portfolio-display').textContent = portfolioNames[value];
            document.getElementById('active-portfolio').textContent = portfolioNames[value];
            
            updatePerformanceData();
            showNotification(`üè¶ Carteira alterada: ${portfolioNames[value]}`);
        }
        
        function updatePerformanceData() {
            const data = performanceData[currentPeriod][currentPortfolio];
            
            document.getElementById('portfolio-perf').textContent = `+${data.portfolio}%`;
            document.getElementById('cdi-perf').textContent = `+${data.cdi}%`;
            document.getElementById('ibov-perf').textContent = `+${data.ibov}%`;
            document.getElementById('ipca-perf').textContent = `+${data.ipca}%`;
            
            // Update vs CDI calculation
            const vsCDI = (data.portfolio - data.cdi).toFixed(1);
            document.getElementById('vs-cdi').textContent = `${vsCDI > 0 ? '+' : ''}${vsCDI}% p.p.`;
            document.getElementById('vs-cdi').style.color = vsCDI > 0 ? '#10b981' : '#ef4444';
            
            // Update all period displays
            document.querySelectorAll('[id$="-period"]').forEach(el => {
                el.textContent = currentPeriod + ' meses';
            });
        }
        
        function showNotification(text) {
            const notification = document.getElementById('notification');
            document.getElementById('notif-text').textContent = text;
            notification.classList.add('show');
            setTimeout(() => hideNotification(), 4000);
        }
        
        function hideNotification() {
            document.getElementById('notification').classList.remove('show');
        }
        
        // Initialize
        window.addEventListener('load', function() {
            showNotification('üéâ Portfolio PWA carregado! CDI corrigido: 12,55%');
            updatePerformanceData();
        });
    </script>
</body>
</html>
